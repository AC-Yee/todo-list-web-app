<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„ç¬¬ä¸€ä¸ªå¾…åŠé¡µé¢</title>
  </head>
  <body>
    <h1>ğŸ“‹ åˆ†ç±»å¾…åŠäº‹é¡¹</h1>
    
    <!-- æ·»åŠ ä»»åŠ¡çš„åŒºåŸŸ -->
    <div>
      <input type="text" id="taskInput" placeholder="è¾“å…¥æ–°çš„å¾…åŠäº‹é¡¹â€¦â€¦">
      <button id="addButton">æ·»åŠ ä»»åŠ¡</button>
    </div>

    <!-- æ˜¾ç¤ºä»»åŠ¡çš„åŒºåŸŸ -->
    <ul id="taskList">
      <!-- å°†æ¥ä»»åŠ¡ä¼šå‡ºç°åœ¨è¿™é‡Œ -->
    </ul>

    <!-- ç»Ÿè®¡æ˜¾ç¤º -->
    <div id="stats">æ€»æ•°ï¼š0 ï½œ å·²å®Œæˆï¼š0</div>

    <script>
      function updateStats() {
          const statsDiv = document.getElementById('stats');

          // æ€»ä»»åŠ¡æ•°ï¼šå°±æ˜¯ li çš„ä¸ªæ•°
          const total = list.children.length;

          // å·²å®Œæˆæ•°ï¼šæ•°ä¸€æ•° li é‡Œå¤é€‰æ¡†è¢«å‹¾é€‰çš„æ•°é‡
          let done = 0;
          // éå†æ‰€æœ‰ liï¼Œæ£€æŸ¥æ¯æ¡é‡Œçš„ checkbox
          for (const li of list.children) {
              const box = li.querySelector('input[type="checkbox"]');
              if (box && box.checked) done++;
          }

          statsDiv.textContent = `æ€»æ•°ï¼š${total} ï½œ å·²å®Œæˆï¼š${done}`;
      }

      // 1. è·å–é¡µé¢å…ƒç´ 
      const input = document.getElementById('taskInput'); // è¾“å…¥æ¡†
      const button = document.getElementById('addButton'); // æŒ‰é’®
      const list = document.getElementById('taskList'); // åˆ—è¡¨

      // 2. ç»™æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶
      button.addEventListener('click', function() {
        const text = input.value.trim(); // å–è¾“å…¥çš„æ–‡å­—å¹¶å»é™¤ç©ºæ ¼
        if (text === '') {
          alert('è¯·è¾“å…¥å†…å®¹'); // ç©ºçš„è¯æç¤ºä¸€ä¸‹
          return;
        }

        // 3. åˆ›å»ºä¸€ä¸ªæ–°çš„ <li> å…ƒç´ 
        // åˆ›å»ºä¸€ä¸ªæ–°çš„ <li> å…ƒç´ 
        const li = document.createElement('li');

        // (1) åˆ›å»ºå®Œæˆå‹¾é€‰æ¡†
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';

        // (2) ä»»åŠ¡æ–‡å­—
        const span = document.createElement('span');
        span.textContent = text;

        // (3) åˆ é™¤æŒ‰é’®
        const delBtn = document.createElement('button');
        delBtn.textContent = 'åˆ é™¤';

        // (4) å¤é€‰æ¡†çš„è¡Œä¸ºï¼šåˆ‡æ¢å®Œæˆæ ·å¼ & æ›´æ–°ç»Ÿè®¡
        checkbox.addEventListener('change', function() {
            if (checkbox.checked) {
                // ä¸ç”¨ CSS æ–‡ä»¶ï¼Œå…ˆç”¨è¡Œå†…æ ·å¼è¡¨è¾¾â€œå®Œæˆâ€çš„è§†è§‰
                span.style.textDecoration = 'line-through';
                span.style.color = '#777';
            } else {
                span.style.textDecoration = 'none';
                span.style.color = '';
            }
            updateStats(); // å‹¾é€‰çŠ¶æ€å˜åŒ–æ—¶æ›´æ–°ç»Ÿè®¡
        });

        // (5) åˆ é™¤æŒ‰é’®çš„è¡Œä¸ºï¼šåˆ é™¤ li & æ›´æ–°ç»Ÿè®¡
        delBtn.addEventListener('click', function() {
            list.removeChild(li);
            updateStats();
        });

        // æŠŠå…ƒç´ ç»„è£…è¿› li
        li.appendChild(checkbox);
        li.appendChild(span);
        li.appendChild(delBtn);

        // æŠŠ li æ”¾åˆ°åˆ—è¡¨é‡Œ
        list.appendChild(li);

        // æ–°å¢ä»»åŠ¡åä¹Ÿæ›´æ–°ä¸€æ¬¡ç»Ÿè®¡
        updateStats();

        // 4. æ¸…ç©ºè¾“å…¥æ¡†
        input.value = '';
        input.focus();
      });

      // 5. æŒ‰ Enter ç›´æ¥æ·»åŠ ä»»åŠ¡
      input.addEventListener('keydown', function (e) {
          if (e.key === 'Enter') {
              button.click(); // è§¦å‘â€œæ·»åŠ ä»»åŠ¡â€å’Œåç»­æ¸²æŸ“/ç»Ÿè®¡
          }
      });

    </script>
  </body>
</html>
